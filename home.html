<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link href='https://fonts.googleapis.com/css?family=Roboto+Slab|Raleway:200' rel='stylesheet' type='text/css'>
	<title>Pic O' Pancakes</title>
</head>
<body>
	<h1>Pic O' Pancakes</h1>

	<div>
		<h1>Tester</h1>
		<img id="tester" src="https://farm6.staticflickr.com/5698/23749519015_230cfc6ebe.jpg" >

		<div id="light" class="white_content">
			<h2>Lightbox Content</h2>
			<a id="tester_close">Close</a>
		</div>

		<div id="fade" class="black_overlay"></div>
	</div>

	<!-- Picture Grid -->
	<div id = "picture_grid">
		<ul id="picture_list">

		</ul>
	</div>

	<!-- Lightbox Display -->
	<div id = "lightbox" class = "lightbox">
		<table class = "lightbox_table">
			<tr>
				<td id = "lightbox_table_cell" class="lightbox_table_cell">
					<div id="lightbox_content">HIIIII IM HERE</div>
				</td>
			</tr>

		</table>
	</div>


	<div id="spotlight" class="spotlight_content"></div>
	<div id="back" class="shadow"></div>

<script type="text/javascript">
function jsonFlickrApi(rsp){
	window.rsp = rsp;

	// Creating the elements for each photo
	var numberOfPhotos = rsp.photos.photo.length;

	for (var i=0; i < numberOfPhotos; i++){
		var singlePhoto = rsp.photos.photo[i]
		var photoId = singlePhoto.id;
		var photoFarmId = singlePhoto.farm;
		var photoServerId = singlePhoto.server;
		var photoSecret = singlePhoto.secret;
		var photoTitle = singlePhoto.title;

		var newUrl = "https://farm" + photoFarmId + ".staticflickr.com/" + photoServerId + "/" + photoId + "_" + photoSecret + ".jpg";

		var img = document.createElement("img");
		img.id = "photo" + i;
		img.className = "primaryImage";
		img.src = newUrl;
		img.alt = photoTitle;
		img.onclick = function() {displayLightbox(img)};

		var list = document.getElementById('picture_list');
		var entry = document.createElement('li');

		entry.appendChild(img);
		// entry.appendChild(infoDiv);
		list.appendChild(entry);
	}

	function testerDL(){
		console.log("got to tester");
		var light = document.getElementById('light');
		light.style.display = 'block';
		var fade = document.getElementById('fade');
		fade.style.display = 'block';
	}

	function testerCloseFunc(){
		console.log("Close func!");
		document.getElementById('light').style.display = 'none';
		document.getElementById('fade').style.display= 'none';

	}

	//function to display the lightbox view of specific image
	function displayLightbox (img){
		console.log("clicked!" + img.src + " " + img.alt);
		var lightbox = document.getElementById('lightbox')
		lightbox.style.display = 'inline';
	}


	//event listener on all images for said function
	var allPrimaryImages = document.getElementsByClassName("primaryImage");

	var testerEL = document.getElementById('tester');
	testerEL.addEventListener("click", function(){testerDL()})

	var testerClose = document.getElementById('tester_close');
	testerClose.addEventListener("click", function(){testerCLoseFunc()});
	//console.log(allPrimaryImages)

	// for (var i = 0; i < allPrimaryImages.length; i++){
	// 	//console.log(allPrimaryImages[i]);
	// 	allPrimaryImages[i].addEventListener("click", function(){displayLightbox()}, false);
	// }
}
</script>

<script type="text/javascript" language="javascript" src="https://api.flickr.com/services/rest/?format=json&method=flickr.photos.search&tags=pancakes&tag_mode=all&api_key=576a1c6c62cfcf95bc8a147ad2c97836"></script>
</body>
</html>